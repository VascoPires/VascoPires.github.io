<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="UTF-8"> <title>Interactive Stress Tensor Visualization</title> <link rel="icon" href="/assets/img/web_icon.ico"> <link rel="shortcut icon" href="/assets/img/web_icon.ico"> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}};</script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script> <style>body{margin:0;overflow:hidden;font-family:'Segoe UI',sans-serif;background:#111;color:white}#container{width:100vw;height:100vh;position:absolute;top:0;left:0;z-index:1}.back-home{position:fixed;top:16px;right:16px;z-index:20;background:rgba(0,0,0,0.7);color:#fff;padding:8px 12px;border-radius:6px;border:1px solid #444;text-decoration:none;font-size:14px;backdrop-filter:blur(4px)}#ui-layer{position:absolute;top:20px;left:20px;pointer-events:none;display:flex;flex-direction:column;gap:15px;max-height:95vh;overflow-y:auto;z-index:10;padding-right:10px}#ui-layer::-webkit-scrollbar{width:0;background:transparent}.panel{background:rgba(0,0,0,0.85);padding:15px;border-radius:8px;border:1px solid #444;box-shadow:0 4px 10px rgba(0,0,0,0.5);pointer-events:auto;width:330px}h3{margin:0 0 10px 0;font-size:16px;color:#4fc3f7;text-transform:uppercase;letter-spacing:1px;border-bottom:1px solid #444;padding-bottom:5px}.matrix-container{display:flex;align-items:center;justify-content:center;font-family:'Courier New',monospace;font-size:16px}.bracket{font-size:50px;font-weight:lighter;color:white;line-height:50px}.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;text-align:right;margin:0 10px}.cell{width:50px}.cell.diag{color:#4fc3f7;font-weight:bold}.cell.off{color:#ff8a65}.slider-group{margin-bottom:8px}.slider-header{display:flex;justify-content:space-between;font-size:14px;margin-bottom:2px;color:#ccc;align-items:center}.math-label{font-size:14px}.val-label{font-family:monospace;color:#4fc3f7}input[type=range]{width:100%;cursor:pointer;accent-color:#4fc3f7}.math-block{font-size:13px;color:#ddd;margin-bottom:10px;line-height:1.5}.stat-row{display:flex;justify-content:space-between;margin-bottom:5px;align-items:center}#legend{position:absolute;bottom:20px;right:20px;text-align:right;font-size:18px;color:#aaa;pointer-events:none;background:rgba(0,0,0,0.8);padding:15px;border-radius:8px;z-index:10;line-height:1.25}.legend-item{margin-bottom:5px;display:flex;justify-content:flex-end;align-items:center}.color-box{display:inline-block;width:18px;height:18px;margin-left:8px;border-radius:4px}#view-controls{position:absolute;top:10px;left:50%;transform:translateX(-50%);display:flex;gap:10px;z-index:15;pointer-events:none}#view-controls button{padding:8px 12px;border:1px solid #555;background:rgba(0,0,0,0.7);color:white;border-radius:4px;cursor:pointer;font-size:14px;pointer-events:auto;position:relative}.tooltip-bubble{position:absolute;top:42px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.85);color:#fff;padding:10px 12px;border-radius:8px;border:1px solid #555;font-size:12px;min-width:220px;max-width:260px;box-shadow:0 8px 18px rgba(0,0,0,0.35);z-index:50;opacity:0;pointer-events:none;transition:opacity 150ms ease,transform 150ms ease}.tooltip-bubble.show{opacity:1;transform:translateX(-50%) translateY(4px);pointer-events:auto}</style> <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script> </head> <body> <a class="back-home" href="/teaching/">‚Üê Back to Teaching &amp; Resources</a> <div id="view-controls"> <button data-view="iso">Isometric</button> <button data-view="posx">+X View</button> <button data-view="posy">+Y View</button> <button data-view="posz">+Z View</button> <div id="view-tooltip" class="tooltip-bubble"> According to the global axes. The cube keeps its relative rotation; views align camera to the chosen axis. </div> </div> <div id="ui-layer"> <div class="panel"> <h3>Local Stress</h3> <div style="font-size: 12px; color: #bbb; margin-bottom:10px;"> Components projected onto the rotating cube basis. </div> <div class="matrix-container"> <div class="bracket">[</div> <div class="grid" id="matrix-grid"></div> <div class="bracket">]</div> </div> </div> <div class="panel"> <h3>Global Stress State</h3> <div class="slider-group"> <div class="slider-header"> <span class="math-label">$\sigma_{xx}$</span> <span id="lbl-sxx" class="val-label">10</span> </div> <input type="range" id="inp-sxx" min="-10" max="10" value="10"> </div> <div class="slider-group"> <div class="slider-header"> <span class="math-label">$\sigma_{yy}$</span> <span id="lbl-syy" class="val-label">0</span> </div> <input type="range" id="inp-syy" min="-10" max="10" value="0"> </div> <div class="slider-group"> <div class="slider-header"> <span class="math-label">$\sigma_{zz}$</span> <span id="lbl-szz" class="val-label">0</span> </div> <input type="range" id="inp-szz" min="-10" max="10" value="0"> </div> <div class="slider-group"> <div class="slider-header"> <span class="math-label">$\tau_{xy}$</span> <span id="lbl-txy" class="val-label">5</span> </div> <input type="range" id="inp-txy" min="-10" max="10" value="5"> </div> <div class="slider-group"> <div class="slider-header"> <span class="math-label">$\tau_{yz}$</span> <span id="lbl-tyz" class="val-label">5</span> </div> <input type="range" id="inp-tyz" min="-10" max="10" value="5"> </div> <div class="slider-group"> <div class="slider-header"> <span class="math-label">$\tau_{xz}$</span> <span id="lbl-txz" class="val-label">0</span> </div> <input type="range" id="inp-txz" min="-10" max="10" value="0"> </div> <button onclick="resetRotation()" style="margin-top:10px; width:100%; padding:8px; cursor:pointer; background:#333; color:white; border:1px solid #555;"> Reset Cube View </button> </div> <div class="panel"> <h3>Governing Equations</h3> <div class="math-block"> <b>1. Cauchy's Law (Tractions):</b><br> $$ \vec{t}^{(\vec{n})} = \boldsymbol{\sigma} \cdot \vec{n} $$ The vectors $\vec{t}$ change as the surface normal $\vec{n}$ rotates. </div> <div class="math-block"> <b>2. Tensor Transformation:</b><br> $$ \boldsymbol{\sigma}_{\text{local}} = \mathbf{R}^T \, \boldsymbol{\sigma}_{\text{global}} \, \mathbf{R} $$ </div> <hr style="border-color:#444"> <div class="math-block" style="margin-bottom:0"> <b>3. Invariants (Constant):</b> <div class="stat-row"> <span>Trace ($I_1$):</span> <span id="val-trace" class="val-label" style="color:#ffd54f">0.00</span> </div> <div class="stat-row"> <span>Von Mises ($\sigma_{vm}$):</span> <span id="val-vm" class="val-label" style="color:#ffd54f">0.00</span> </div> <div class="stat-row"> <span>Determinant ($I_3$):</span> <span id="val-det" class="val-label" style="color:#ffd54f">0.00</span> </div> </div> <button id="btn-toggle-principal" style="margin-top:10px; width:100%; padding:8px; cursor:pointer; background:#333; color:white; border:1px solid #555;"> Show Principal Stresses </button> </div> </div> <div id="legend"> <div class="legend-item"> Global Fixed Axes (X,Y,Z) <span class="color-box" style="background:linear-gradient(45deg, red, green, blue);"></span> </div> <div class="legend-item"> Principal Stresses <span class="color-box" style="background:#ffd700;"></span> </div> <div style="margin-top:10px; font-style:italic; color:#bbb; border-top:1px solid #444; padding-top:5px;"> Left Drag: Rotate Camera<br> Right Drag: Rotate Cube<br> Mouse Wheel: Zoom </div> </div> <div id="container"></div> <script>function createAxisLabel(e,t,i){const n=96,o=document.createElement("canvas");o.width=o.height=n;const a=o.getContext("2d");a.clearRect(0,0,n,n),a.font='bold 40px "Segoe UI", sans-serif',a.fillStyle=i,a.textAlign="center",a.textBaseline="middle",a.fillText(e,n/2,n/2);const r=new THREE.CanvasTexture(o);r.needsUpdate=!0;const s=new THREE.SpriteMaterial({map:r,transparent:!0}),c=new THREE.Sprite(s);return c.scale.set(.3,.3,.3),c.position.copy(t),c}function updateStressTensor(){S.set(state.sxx,state.txy,state.txz,state.txy,state.syy,state.tyz,state.txz,state.tyz,state.szz),updatePrincipalVis(),updateScene(!0)}function updatePrincipalVis(){const e=jacobi(S);for(let t=0;t<3;t++){const i=e.eigenvalues[t],n=e.eigenvectors[t].normalize(),o=.2*Math.abs(i),a=principalArrows[t];if(o<.05){a.visible=!1;continue}a.visible=!0;const r=i>=0?n:n.clone().negate();a.setDirection(r),a.setLength(o)}}function setCameraView(e){const t=cameraViews[e];t&&(camera.position.copy(t.position),camera.up.copy(t.up),camera.lookAt(0,0,0),updateScene(!0),updateAxisLabelVisibility())}function showViewTooltip(){clearTimeout(tooltipTimer),viewTooltip&&(viewTooltip.classList.add("show"),tooltipTimer=setTimeout(()=>viewTooltip.classList.remove("show"),2200))}function setPrincipalVisibility(e){principalVisible=e,principalGroup.visible=e,facePlanes.forEach(t=>{t.material.opacity=e?.4:.8}),principalToggleBtn&&(principalToggleBtn.innerText=e?"Hide Principal Stresses":"Show Principal Stresses")}function updateAxisLabelVisibility(){const e=camera.position.clone().normalize();axisLabels.forEach(t=>{const i=t.userData.axisDir,n=Math.abs(e.dot(i));t.visible=n<.9})}function updateScene(e=!1){if(!isDragging&&!e)return;const t=new THREE.Matrix3;t.setFromMatrix4(cube.matrixWorld);for(let e=0;e<faceData.length;e++){const i=faceData[e],n=i.normal.clone().applyMatrix3(t).normalize(),o=i.center.clone().applyMatrix3(t),a=n.clone().applyMatrix3(S),r=a.length(),s=tractionArrows[e];if(s.position.copy(o),r<.01){s.visible=!1,tractionComponentArrows[e].forEach(e=>e.visible=!1);continue}s.visible=!0,s.setColor(axisColors[i.axis].arrow),s.setDirection(a.clone().normalize()),s.setLength(.2*r);const c=tractionComponentArrows[e];for(let e=0;e<globalAxisVectors.length;e++){const t=a.dot(globalAxisVectors[e]),n=Math.abs(t),r=c[e];if(r.position.copy(o),n<.01){r.visible=!1;continue}r.visible=!0,r.setColor(axisColors[i.axis].component);const s=t>=0?globalAxisVectors[e]:globalAxisVectors[e].clone().negate();r.setDirection(s),r.setLength(.2*n)}}updateDOM(t.clone().transpose().clone().multiply(S).multiply(t),S),updateAxisLabelVisibility()}function updateDOM(e,t){const i=document.getElementById("matrix-grid");i.innerHTML="";const n=e.elements;[[n[0],n[3],n[6]],[n[1],n[4],n[7]],[n[2],n[5],n[8]]].forEach((e,t)=>{e.forEach((e,n)=>{const o=document.createElement("div");o.className="cell "+(t===n?"diag":"off");let a=e.toFixed(1);"-0.0"===a&&(a="0.0"),o.innerText=a,i.appendChild(o)})});const o=t.elements[0]+t.elements[4]+t.elements[8],a=t.elements[0],r=t.elements[4],s=t.elements[8],c=t.elements[3],l=t.elements[7],p=t.elements[6],d=Math.sqrt(.5*(Math.pow(a-r,2)+Math.pow(r-s,2)+Math.pow(s-a,2)+6*(c*c+l*l+p*p))),E=t.determinant();document.getElementById("val-trace").innerText=o.toFixed(2),document.getElementById("val-vm").innerText=d.toFixed(2),document.getElementById("val-det").innerText=E.toFixed(2)}function jacobi(e){let t=e.elements.slice();const i=(e,i)=>t[3*i+e],n=(e,i,n)=>t[3*i+e]=n;let o=[1,0,0,0,1,0,0,0,1];const a=(e,t)=>o[3*t+e],r=(e,t,i)=>o[3*t+e]=i,s=50;for(let e=0;e<s;e++){let e=0,t=0,o=1;for(let n=0;n<3;n++)for(let a=n+1;a<3;a++)Math.abs(i(n,a))>e&&(e=Math.abs(i(n,a)),t=n,o=a);if(e<1e-9)break;let s=0;s=Math.abs(i(t,t)-i(o,o))<1e-10?Math.PI/4:.5*Math.atan(2*i(t,o)/(i(t,t)-i(o,o)));const c=Math.cos(s),l=Math.sin(s),p=c*c*i(t,t)-2*l*c*i(t,o)+l*l*i(o,o),d=l*l*i(t,t)+2*l*c*i(t,o)+c*c*i(o,o);for(let e=0;e<3;e++)if(e!==t&&e!==o){const a=c*i(e,t)-l*i(e,o),r=l*i(e,t)+c*i(e,o);n(e,t,a),n(t,e,a),n(e,o,r),n(o,e,r)}n(t,t,p),n(o,o,d),n(t,o,0),n(o,t,0);for(let e=0;e<3;e++){const i=c*a(e,t)-l*a(e,o),n=l*a(e,t)+c*a(e,o);r(e,t,i),r(e,o,n)}}return{eigenvalues:[i(0,0),i(1,1),i(2,2)],eigenvectors:[new THREE.Vector3(a(0,0),a(1,0),a(2,0)),new THREE.Vector3(a(0,1),a(1,1),a(2,1)),new THREE.Vector3(a(0,2),a(1,2),a(2,2))]}}function toRad(e){return e*(Math.PI/180)}function bindSlider(e,t){const i=document.getElementById("inp-"+e),n=document.getElementById("lbl-"+e);i.value=state[t],n.innerText=state[t],i.addEventListener("input",e=>{state[t]=parseFloat(e.target.value),n.innerText=state[t],updateStressTensor()})}function resetRotation(){cube.rotation.set(0,0,0),cube.updateMatrixWorld(!0),setCameraView("iso"),updateScene(!0)}function animate(){requestAnimationFrame(animate),renderer.render(scene,camera)}const container=document.getElementById("container"),scene=new THREE.Scene;scene.background=new THREE.Color(1710618),scene.fog=new THREE.Fog(1710618,10,30);const camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,100);camera.position.set(7,5,7),camera.lookAt(0,0,0);const renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight),renderer.setPixelRatio(window.devicePixelRatio),container.appendChild(renderer.domElement);const ambientLight=new THREE.AmbientLight(6316128);scene.add(ambientLight);const dirLight=new THREE.DirectionalLight(16777215,.8);dirLight.position.set(5,10,7),scene.add(dirLight);const dirLight2=new THREE.DirectionalLight(16777215,.5);dirLight2.position.set(-5,-5,-5),scene.add(dirLight2);const globalAxes=new THREE.AxesHelper(3.5);scene.add(globalAxes);const axisLabels=[],axisLabelConfigs=[{text:"X",position:new THREE.Vector3(3.4,.2,0),color:"#ff4040",axisDir:new THREE.Vector3(1,0,0)},{text:"Y",position:new THREE.Vector3(.2,3.4,0),color:"#4cff4c",axisDir:new THREE.Vector3(0,1,0)},{text:"Z",position:new THREE.Vector3(.2,0,3.4),color:"#4c7dff",axisDir:new THREE.Vector3(0,0,1)}];axisLabelConfigs.forEach(e=>{const t=createAxisLabel(e.text,e.position,e.color);t.userData.axisDir=e.axisDir,scene.add(t),axisLabels.push(t)});const geometry=new THREE.BoxGeometry(2.5,2.5,2.5),material=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.05,depthWrite:!1,side:THREE.DoubleSide}),cube=new THREE.Mesh(geometry,material),edges=new THREE.EdgesGeometry(geometry),line=new THREE.LineSegments(edges,new THREE.LineBasicMaterial({color:7829367,linewidth:2}));cube.add(line);const localAxes=new THREE.AxesHelper(1);cube.add(localAxes),scene.add(cube);const axisColors={x:{arrow:16728128,component:13381423,face:16767706},y:{arrow:5046092,component:2791722,face:14417887},z:{arrow:5012991,component:2771114,face:14411263}},facePlanes=[],tractionArrows=[],tractionComponentArrows=[],faceData=[{axis:"x",normal:new THREE.Vector3(1,0,0),center:new THREE.Vector3(1.25,0,0)},{axis:"y",normal:new THREE.Vector3(0,1,0),center:new THREE.Vector3(0,1.25,0)},{axis:"z",normal:new THREE.Vector3(0,0,1),center:new THREE.Vector3(0,0,1.25)}];faceData.forEach(e=>{const t=new THREE.PlaneGeometry(2.5,2.5),i=new THREE.MeshBasicMaterial({color:axisColors[e.axis].face,transparent:!0,opacity:.8,side:THREE.DoubleSide,depthWrite:!1}),n=new THREE.Mesh(t,i),o=(new THREE.Quaternion).setFromUnitVectors(new THREE.Vector3(0,0,1),e.normal.clone().normalize());n.quaternion.copy(o),n.position.copy(e.center),cube.add(n),facePlanes.push(n)}),faceData.forEach(e=>{const t=new THREE.ArrowHelper(new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,0),1,axisColors[e.axis].arrow,.25,.15);scene.add(t),tractionArrows.push(t);const i=[];["x","y","z"].forEach(()=>{const t=new THREE.ArrowHelper(new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,0),.5,axisColors[e.axis].component,.3,.18);t.visible=!1,scene.add(t),i.push(t)}),tractionComponentArrows.push(i)});const principalArrows=[],principalGroup=new THREE.Group;scene.add(principalGroup);for(let e=0;e<3;e++){const e=new THREE.ArrowHelper(new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,0),1,16766720,.35,.22);principalGroup.add(e),principalArrows.push(e)}principalGroup.visible=!1;let S=new THREE.Matrix3,state={sxx:10,syy:0,szz:0,txy:0,tyz:5,txz:5},isDragging=!1,isRightClick=!1,previousMousePosition={x:0,y:0};const orbitTarget=new THREE.Vector3(0,0,0),orbitSpherical=new THREE.Spherical,ORBIT_SPEED=.005,MIN_POLAR=.05,MAX_POLAR=Math.PI-.05,globalAxisVectors=[new THREE.Vector3(1,0,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1)];let principalVisible=!1;const principalToggleBtn=document.getElementById("btn-toggle-principal"),viewButtons=document.querySelectorAll("#view-controls button"),viewTooltip=document.getElementById("view-tooltip");let tooltipTimer;const cameraViews={iso:{position:new THREE.Vector3(7,5,7),up:new THREE.Vector3(0,1,0)},posx:{position:new THREE.Vector3(10,0,0),up:new THREE.Vector3(0,1,0)},posy:{position:new THREE.Vector3(1e-4,10,1e-4),up:new THREE.Vector3(0,0,1)},posz:{position:new THREE.Vector3(0,0,10),up:new THREE.Vector3(0,1,0)}};window.addEventListener("resize",()=>{camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),updateScene(!0)}),document.addEventListener("mousedown",e=>{e.target.closest("#ui-layer")||(isDragging=!0,isRightClick=2===e.button,previousMousePosition={x:e.clientX,y:e.clientY})}),document.addEventListener("mouseup",()=>{isDragging=!1,updateScene(!0)}),document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("mousemove",e=>{if(!isDragging)return;const t={x:e.clientX-previousMousePosition.x,y:e.clientY-previousMousePosition.y};if(isRightClick){const e=.3,i=(new THREE.Quaternion).setFromEuler(new THREE.Euler(toRad(t.y*e),toRad(t.x*e),0,"XYZ"));cube.quaternion.multiplyQuaternions(i,cube.quaternion)}else{const e=camera.position.clone().sub(orbitTarget);orbitSpherical.setFromVector3(e),orbitSpherical.theta-=t.x*ORBIT_SPEED,orbitSpherical.phi-=t.y*ORBIT_SPEED,orbitSpherical.phi=THREE.MathUtils.clamp(orbitSpherical.phi,MIN_POLAR,MAX_POLAR),e.setFromSpherical(orbitSpherical),camera.position.copy(orbitTarget).add(e),camera.lookAt(orbitTarget)}previousMousePosition={x:e.clientX,y:e.clientY},updateScene()}),document.addEventListener("wheel",e=>{if(e.target.closest("#ui-layer"))return;e.preventDefault();const t=.01*e.deltaY,i=camera.position.clone().normalize();let n=camera.position.length();n=THREE.MathUtils.clamp(n+t,3,20),camera.position.copy(i.multiplyScalar(n)),camera.lookAt(0,0,0),updateAxisLabelVisibility()}),bindSlider("sxx","sxx"),bindSlider("syy","syy"),bindSlider("szz","szz"),bindSlider("txy","txy"),bindSlider("tyz","tyz"),bindSlider("txz","txz"),principalToggleBtn&&principalToggleBtn.addEventListener("click",()=>{setPrincipalVisibility(!principalVisible)}),setPrincipalVisibility(!1),updateAxisLabelVisibility(),viewButtons.forEach(e=>{e.addEventListener("mouseenter",showViewTooltip),e.addEventListener("focus",showViewTooltip),e.addEventListener("mouseleave",()=>viewTooltip&&viewTooltip.classList.remove("show")),e.addEventListener("blur",()=>viewTooltip&&viewTooltip.classList.remove("show")),e.addEventListener("click",()=>setCameraView(e.dataset.view))}),updateStressTensor(),animate(),setTimeout(()=>updateScene(!0),100),window.addEventListener("load",()=>{window.MathJax&&window.MathJax.typesetPromise&&MathJax.typesetPromise()});</script> </body> </html>